# TODO add tests for receiving instances
-
  name: PullInstances3
  description: Pull request and returns zero instances with eos=true and no context
  pywbem_request:
    url: http://acme.com:80
    creds:
    - username
    - password
    namespace: root/cimv2
    timeout: 10
    debug: true
    operation:
      pywbem_method: PullInstances
      MaxObjectCount: 1
      context:
      - '500001'
      - root/cimv2
  pywbem_response:
        pullresult:
            context: null
            eos: true
            instances: []

  http_request:
    verb: POST
    url: http://acme.com:80/cimom
    headers:
      CIMOperation: MethodCall
      CIMMethod: PullInstances
      CIMObject: root/cimv2
    data: '<?xml version="1.0" encoding="utf-8" ?>
      <CIM CIMVERSION="2.0" DTDVERSION="2.0">
      <MESSAGE ID="1001" PROTOCOLVERSION="1.0">
      <SIMPLEREQ>
      <IMETHODCALL NAME="PullInstances">
      <LOCALNAMESPACEPATH>
      <NAMESPACE NAME="root"/>
      <NAMESPACE NAME="cimv2"/>
      </LOCALNAMESPACEPATH>
      <IPARAMVALUE NAME="EnumerationContext">
      <VALUE>500001</VALUE>
      </IPARAMVALUE>
      <IPARAMVALUE NAME="MaxObjectCount">
      <VALUE>1</VALUE>
      </IPARAMVALUE>
      </IMETHODCALL>
      </SIMPLEREQ>
      </MESSAGE>
      </CIM>'
  http_response:
        status: 200
        headers:
            CIMOperation: MethodResponse
        data: >
            <?xml version="1.0" encoding="utf-8" ?>
            <CIM CIMVERSION="2.0" DTDVERSION="2.0">
                <MESSAGE ID="1000" PROTOCOLVERSION="1.0">
                    <SIMPLERSP>
                        <IMETHODRESPONSE NAME="PullInstances">
                            <IRETURNVALUE>
                            </IRETURNVALUE>
                            <PARAMVALUE NAME="EndOfSequence">
                                <VALUE>TRUE</VALUE>
                            </PARAMVALUE>
                            <PARAMVALUE NAME="EnumerationContext">
                                <VALUE></VALUE>
                            </PARAMVALUE>
                        </IMETHODRESPONSE>
                    </SIMPLERSP>
                </MESSAGE>
            </CIM>
-
  name: PullInstancesE1
  description: Pull request with MaxObjectCount invalid raises ValueError
  pywbem_request:
    url: http://acme.com:80
    creds:
    - username
    - password
    namespace: root/cimv2
    timeout: 10
    debug: false
    operation:
      pywbem_method: PullInstances
      MaxObjectCount: -1
      context:
      - '500001'
      - root/cimv2
  pywbem_response:
        exception: ValueError
-
  name: PullInstancesE2
  description: Pull request with context None raises ValueError
  pywbem_request:
    url: http://acme.com:80
    creds:
    - username
    - password
    namespace: root/cimv2
    timeout: 10
    debug: false
    operation:
      pywbem_method: PullInstances
      MaxObjectCount: 1
      context: null
  pywbem_response:
        exception: ValueError
-
  name: PullInstancesE3
  description: Pull request with Invalid Input Parameter (no MaxObjectCount)
  pywbem_request:
    url: http://acme.com:80
    creds:
    - username
    - password
    namespace: root/cimv2
    timeout: 10
    debug: false
    operation:
      pywbem_method: PullInstances
      MaxObjectCount: 1
  pywbem_response:
        exception: TypeError

-
  name: PullInstancesE4
  description: Pull request with MaxObjectCount invalid raises ValueError
  pywbem_request:
    url: http://acme.com:80
    creds:
    - username
    - password
    namespace: root/cimv2
    timeout: 10
    debug: false
    operation:
      pywbem_method: PullInstances
      MaxObjectCount: None
      context:
      - '500001'
      - root/cimv2
  pywbem_response:
        exception: ValueError
